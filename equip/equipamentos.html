<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Equipamentos ‚Äì Mestre Estelar</title>
    <!-- caminho relativo do arquivo movido para /equip/ -->
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../menu.css">
</head>
<body>

    <!-- MENU AUTOM√ÅTICO -->
    <div id="menu-container"></div>
    <script src="../menu.js" defer></script>

    <!-- CONTE√öDO -->
    <div class="content">
        <h1>‚öîÔ∏è Progress√£o de Itens</h1>
        <p>Descri√ß√£o.</p>

        <!-- ===== Progress√µes de equipamentos (NOVO BLOCO) ===== -->
        <div class="progression-tabs">
            <button class="progression-tab active" data-progression="p1">Progress√£o 1</button>
            <button class="progression-tab" data-progression="p2">Progress√£o 2</button>
            <button class="progression-tab" data-progression="p3">Progress√£o 3</button>
            <button class="progression-tab" data-progression="p4">Progress√£o 4</button>
        </div>

        <div id="equip-windows-container"></div><!-- ===== FIM progress√µes ===== -->

        <!-- ===== Janela principal de equipamentos ===== -->
        <!-- <div class="equip-window">

            <div class="equip-bar"></div>
            abas
            <div class="equip-tabs">
                <button class="tab active" data-tab="equip">equip.</button>
                <button class="tab" data-tab="visual">visual</button>
                <button class="tab" data-tab="cards">cartas</button>
            </div>

            <! === abas: container para cada conte√∫do === -->
            <!-- aba equip (vis√≠vel por padr√£o) -->
            <!-- <div class="tab-container active" id="tab-equip">

                <div class="equip-body">

                    <!- left: col de slots -->
                    <!-- <div class="slots-col">
                        <!- head -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">topo</div>
                            <div class="slot-box">
                                <div class="item" data-id="19362">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/19362" alt="elmo do xogum">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/19362" alt="">
                                        <div class="ro-tooltip-title">elmo do xogum</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+15% dano f√≠sico vs neutro/fogo<br>+5% aspd (uni√£o solar)</p>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        <!-- </div> -->

                        <!-- r-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">baixo</div>
                            <div class="slot-box">
                                <div class="item" data-id="18754">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/18754" alt="presas vam√≠ricas">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/18754" alt="">
                                        <div class="ro-tooltip-title">presas vam√≠ricas</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+x dano f√≠sico.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- robe (meio) -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">m√£o direita</div>
                            <div class="slot-box">
                                <div class="item" data-id="28612">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/28612" alt="apocal√≠pse ilusional">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/28612" alt="">
                                        <div class="ro-tooltip-title">apocal√≠pse ilusional</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>b√¥nus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- accessory -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">capa</div>
                            <div class="slot-box">
                                <div class="item" data-id="20838">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/20838" alt="sobrepeliz ilusional">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/20838" alt="">
                                        <div class="ro-tooltip-title">sobrepeliz ilusional</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>b√¥nus elemental.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- l-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">acess√≥rio direito</div>
                            <div class="slot-box">
                                <div class="item" data-id="28303">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/28303" alt="n√∫cleo vesper 02">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/28303" alt="">
                                        <div class="ro-tooltip-title">n√∫cleo vesper 02</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>b√¥nus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> end slots-col -->
                    
                    <!-- center: quadro do boneco -->
                    <!-- <div class="char-col">
                        <div class="char-frame">
                        <div class="char-sprite-bg" style="background-image:url('https://raw.githubusercontent.com/tatutoru/mestre-estelar/main/assets/sprites/char-iddle.png');"></div>
                        </div>
                    </div> -->

                    <!-- right slots (coluna igual √† esquerda) -->
                    <!-- <div class="slots-col slots-col-right"> -->
                        <!-- topo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">meio</div>
                            <div class="slot-box">
                                <div class="item" data-id="19392">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/19392" alt="presilha dos amantes [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/19392" alt="">
                                        <div class="ro-tooltip-title">presilha dos amantes [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- baixo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">armadura</div>
                            <div class="slot-box">
                                <div class="item" data-id="15378">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/15378" alt="coura√ßa magm√°tica [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/15378" alt="">
                                        <div class="ro-tooltip-title">coura√ßa magm√°tica [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- m√£o direita -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">m√£o esquerda</div>
                            <div class="slot-box">
                                <div class="item" data-id="28949">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/28949" alt="escudo de j√≥ias [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/28949" alt="">
                                        <div class="ro-tooltip-title">escudo de j√≥ias [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- capa -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">sapato</div>
                            <div class="slot-box">
                                <div class="item" data-id="22199">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/22199" alt="botas magm√°ticas [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/22199" alt="">
                                        <div class="ro-tooltip-title">botas magm√°ticas [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- acess√≥rio direito -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">acess√≥rio esquerdo</div>
                            <div class="slot-box">
                                <div class="item" data-id="28509">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/28509" alt="anel ilusional [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/28509" alt="">
                                        <div class="ro-tooltip-title">anel ilusional [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    
                <!-- </div> fim equip-body -->

            <!-- </div> fim tab-equip  -->

            <!-- aba visual (c√≥pia inicial do conte√∫do do equip) -->
            <!-- <div class="tab-container" id="tab-visual" style="display:none;">

                <div class="equip-body"> -->

                    <!-- left: col de slots -->
                    <!-- <div class="slots-col"> -->
                        <!-- head -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">enchant topo</div>
                            <div class="slot-box">
                                <div class="item" data-id="310327">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/310327" alt="melee stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/310327" alt="">
                                        <div class="ro-tooltip-title">melee stone</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+15% dano f√≠sico vs neutro/fogo<br>+5% aspd (uni√£o solar)</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- r-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">enchant baixo</div>
                            <div class="slot-box">
                                <div class="item" data-id="310328">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/310328" alt="melee stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/310328" alt="">
                                        <div class="ro-tooltip-title">melee stone</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+x dano f√≠sico.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- robe (meio) -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div> -->

                        <!-- accessory -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">enchant capa</div>
                            <div class="slot-box">
                                <div class="item" data-id="25208">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/25208" alt="absor√ß√£o de sp">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/25208" alt="">
                                        <div class="ro-tooltip-title">absor√ß√£o de sp</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>b√¥nus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- l-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">enchant capa (dual)</div>
                            <div class="slot-box">
                                <div class="item" data-id="29056">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/29056" alt="esfera da conj. fixa">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/29056" alt="">
                                        <div class="ro-tooltip-title">esfera da conj. fixa</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>b√¥nus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                        <!-- </div> end slots-col -->
                    
                    <!-- center: quadro do boneco -->
                    <!-- <div class="char-col">
                        <div class="char-frame">
                        <div class="char-sprite-bg" style="background-image:url('https://raw.githubusercontent.com/tatutoru/mestre-estelar/main/assets/sprites/char-iddle.png');"></div>
                        </div>
                    </div> -->

                    <!-- right slots (coluna igual √† esquerda) -->
                    <!-- <div class="slots-col slots-col-right"> -->
                        <!-- topo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">enchant meio</div>
                            <div class="slot-box">
                                <div class="item" data-id="310329">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/310329" alt="melee stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/310329" alt="">
                                        <div class="ro-tooltip-title">melee stone</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- baixo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div> -->

                        <!-- m√£o direita -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div> -->

                        <!-- capa -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div> -->

                        <!-- acess√≥rio direito -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">anel do mercador</div>
                            <div class="slot-box">
                                <div class="item" data-id="50205">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/iro/490404" alt="anel do mercador">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/iro/490404" alt="">
                                        <div class="ro-tooltip-title">anel do mercador</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    
                <!-- </div> fim equip-body -->

            <!-- </div> fim tab-visual -->

<!-- === aba cartas === -->
<!-- <div class="tab-container" id="tab-cards" style="display:none;">

    <div class="equip-body"> -->

        <!-- left: col de slots -->
                    <!-- <div class="slots-col"> -->
                        <!-- head -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta topo</div>
                            <div class="slot-box">
                                <div class="item" data-id="19362">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/bro/4484" alt="carta">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/bro/4484" alt="">
                                        <div class="ro-tooltip-title">carta</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+15% dano f√≠sico vs neutro/fogo<br>+5% aspd (uni√£o solar)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- r-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                                </div>
                            </div> -->

                        <!-- robe (meio) -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">cartas arma</div>
                            <div class="slot-box">
                                <div class="item" data-id="28612">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/bro/4484" alt="carta ">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/bro/4484" alt="">
                                        <div class="ro-tooltip-title">carta </div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- accessory -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta capa</div>
                            <div class="slot-box">
                                <div class="item" data-id="20838">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/bro/4484" alt="carta wakwak">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/bro/4484" alt="">
                                        <div class="ro-tooltip-title">carta wakwak</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>l.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- l-hand -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta acc. direito</div>
                            <div class="slot-box">
                                <div class="item" data-id="28303">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/bro/4484" alt="carta">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/bro/4484" alt="">
                                        <div class="ro-tooltip-title">carta </div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> end slots-col -->
                    
                    <!-- center: quadro do boneco -->
                    <!-- <div class="char-col">
                        <div class="char-frame">
                        <div class="char-sprite-bg" style="background-image:url('https://raw.githubusercontent.com/tatutoru/mestre-estelar/main/assets/sprites/char-iddle.png');"></div>
                        </div>
                    </div> -->

                    <!-- right slots (coluna igual √† esquerda) -->
                    <!-- <div class="slots-col slots-col-right"> -->
                        <!-- topo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta meio</div>
                            <div class="slot-box">
                                <div class="item" data-id="19392">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/4484" alt="carta ">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/bro/4484" alt="">
                                        <div class="ro-tooltip-title">carta </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- baixo -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta armadura</div>
                            <div class="slot-box">
                                <div class="item" data-id="15378">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/4484" alt="carta ">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/4484" alt="">
                                        <div class="ro-tooltip-title">carta</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- m√£o direita -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta escudo</div>
                            <div class="slot-box">
                                <div class="item" data-id="28949">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/4484" alt="carta">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/4484" alt="">
                                        <div class="ro-tooltip-title">carta</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- capa -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta sapato</div>
                            <div class="slot-box">
                                <div class="item" data-id="22199">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/4484" alt="carta ">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/4484" alt="">
                                        <div class="ro-tooltip-title">carta </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- acess√≥rio direito -->
                        <!-- <div class="slot-row">
                            <div class="slot-label">carta acc. esquerdo</div>
                            <div class="slot-box">
                                <div class="item" data-id="28509">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kroz/4484" alt="carta ">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kroz/4484" alt="">
                                        <div class="ro-tooltip-title">carta </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    </div>
</div>
     </div> fim equip-window  -->

    </div> <!-- fim content -->

    <!-- NOVO: script de template de equip -->
    <script src="equip-window.js"></script>

    <!-- scripts: abas simples, suporte touch para tooltips e reposicionamento -->
<script>
// SCRIPT DE ABAS (substitui o antigo). Usa style.display para mostrar/ocultar.
(function(){
  // espera o DOM estar pronto
  function initTabs() {
    document.querySelectorAll('.equip-window').forEach(windowEl => {
      const tabs = Array.from(windowEl.querySelectorAll('.equip-tabs .tab'));
      const containers = Array.from(windowEl.querySelectorAll('.tab-container'));

      containers.forEach(c => {
        c.style.display = 'none';
      });

      let shown = false;
      const activeTab = windowEl.querySelector('.equip-tabs .tab.active');
      if (activeTab && activeTab.dataset && activeTab.dataset.tab) {
        const id = activeTab.dataset.tab;
        const container = windowEl.querySelector('#tab-' + id);
        if (container) { container.style.display = ''; shown = true; }
      }
      if (!shown && containers.length > 0) {
        containers[0].style.display = '';
      }

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          containers.forEach(c => c.style.display = 'none');

          const targetName = tab.dataset.tab;
          if (!targetName) return;
          const target = windowEl.querySelector('#tab-' + targetName);
          if (target) {
            target.style.display = '';
          }
        });
      });
    });
  }

  // üîπ EXPOE para o resto do c√≥digo poder chamar depois
  window.initEquipTabs = initTabs;

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTabs);
  } else {
    initTabs();
  }
})();
    // SCRIPT DE TOOLTIP COM SUPORTE A TOUCH
      // suporte touch: alterna .touch-open em tooltips quando tocar
      document.querySelectorAll('.ro-tooltip').forEach(el=>{
        el.addEventListener('touchstart', function(e){
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>{ if(o!==el) o.classList.remove('touch-open'); });
          el.classList.toggle('touch-open');
        });
      });

      // fecha tooltip touch ao tocar fora
      document.addEventListener('touchstart', function(e){
        if(!e.target.closest('.ro-tooltip')) {
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>o.classList.remove('touch-open'));
        }
      });

      // Reposiciona tooltips para a esquerda se ultrapassarem a viewport
      (function(){
        const margin = 12; // margem m√≠nima da viewport

        function updateTooltipPlacement(el) {
          const box = el.querySelector('.ro-tooltip-box');
          if(!box) return;
          el.classList.remove('flip-left');

          // tornar vis√≠vel temporariamente para medir largura se necess√°rio
          const prevVis = box.style.visibility;
          box.style.visibility = 'hidden';
          box.style.display = 'block';
          const boxWidth = box.offsetWidth || 220;
          box.style.display = '';
          box.style.visibility = prevVis || '';

          const rect = el.getBoundingClientRect();
          const predictedRight = rect.left + rect.width/2 + boxWidth/2;

          if (predictedRight > (window.innerWidth - margin)) {
            el.classList.add('flip-left');
          } else {
            el.classList.remove('flip-left');
          }
        }

        document.querySelectorAll('.ro-tooltip').forEach(el=>{
          el.addEventListener('mouseenter', ()=> updateTooltipPlacement(el));
          el.addEventListener('focus', ()=> updateTooltipPlacement(el)); // acessibilidade
          el.addEventListener('touchstart', ()=> updateTooltipPlacement(el));
        });

        window.addEventListener('resize', () => {
          document.querySelectorAll('.ro-tooltip').forEach(el=> updateTooltipPlacement(el));
        });
      })();
    
(function () {
  const baseURL = "https://www.pathofisgard.com.br/database/item/";

  function aplicarLinksAutomaticosPreservandoListeners() {
    document.querySelectorAll(".item[data-id]").forEach(container => {
      if (container.querySelector(":scope > a.item-link")) return;

      const id = container.getAttribute("data-id");
      if (!id) return;

      const url = baseURL + id;
      const tooltipEl = container.querySelector(".ro-tooltip");
      if (!tooltipEl) return;

      const parent = tooltipEl.parentElement;
      if (parent && parent.tagName.toLowerCase() === 'a') return;

      const a = document.createElement("a");
      a.href = url;
      a.target = "_blank";
      a.className = "item-link";

      container.replaceChild(a, tooltipEl);
      a.appendChild(tooltipEl);
    });
  }

  // üëá exp√µe pra poder usar no .then(...)
  window.aplicarLinksAutomaticosPreservandoListeners = aplicarLinksAutomaticosPreservandoListeners;

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", aplicarLinksAutomaticosPreservandoListeners);
  } else {
    aplicarLinksAutomaticosPreservandoListeners();
  }
})();


  // =========================
  // PROGRESS√ïES DE EQUIP (NOVO)
  // =========================

const PROGRESSOES_EQUIP = {
  p1: {
    id: 'p1',

    // ABA EQUIP
    equip: {
      slotsLeft: [
        {
          slotLabel: 'Topo',
          id: 19362,
          nome: 'Elmo do Xogum',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/19362',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/19362',
          descricao: '+15% Dano f√≠sico vs Neutro/Fogo<br>+5% ASPD (Uni√£o Solar)'
        },
        {
          slotLabel: 'Baixo',
          id: 18754,
          nome: 'Presas Vam√≠ricas',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/18754',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/18754',
          descricao: '+X Dano f√≠sico.'
        },
        {
          slotLabel: 'M√£o Direita',
          id: 28612,
          nome: 'Apocal√≠pse Ilusional',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28612',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28612',
          descricao: 'B√¥nus elemental.'
        },
        {
          slotLabel: 'Capa',
          id: 20838,
          nome: 'Sobrepeliz Ilusional',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/20838',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/20838',
          descricao: 'B√¥nus elemental.'
        },
        {
          slotLabel: 'Acess√≥rio Direito',
          id: 28303,
          nome: 'N√∫cleo Vesper 02',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28303',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28303',
          descricao: 'B√¥nus elemental.'
        }
      ],
      slotsRight: [
        {
          slotLabel: 'Meio',
          id: 19392,
          nome: 'Presilha dos Amantes [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/19392',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/19392',
          descricao: ''
        },
        {
          slotLabel: 'Armadura',
          id: 15378,
          nome: 'Coura√ßa Magm√°tica [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/15378',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/15378',
          descricao: ''
        },
        {
          slotLabel: 'M√£o Esquerda',
          id: 28949,
          nome: 'Escudo de J√≥ias [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28949',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28949',
          descricao: ''
        },
        {
          slotLabel: 'Sapato',
          id: 22199,
          nome: 'Botas Magm√°ticas [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/22199',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/22199',
          descricao: ''
        },
        {
          slotLabel: 'Acess√≥rio Esquerdo',
          id: 28509,
          nome: 'Anel Ilusional [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28509',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28509',
          descricao: ''
        }
      ]
    },

    // ABA VISUAL (exemplo com seus enchants)
    visual: {
      slotsLeft: [
        {
          slotLabel: 'Enchant Topo',
          id: 310327,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310327',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310327',
          descricao: '+15% Dano f√≠sico vs Neutro/Fogo<br>+5% ASPD (Uni√£o Solar)'
        },
        {
          slotLabel: 'Enchant Baixo',
          id: 310328,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310328',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310328',
          descricao: '+X Dano f√≠sico.'
        },
        {
          slotLabel: 'Enchant Capa',
          id: 25208,
          nome: 'Absor√ß√£o de SP',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/25208',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/25208',
          descricao: 'B√¥nus elemental.'
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          slotLabel: 'Enchant Capa (Dual)',
          id: 29056,
          nome: 'Esfera da Conj. Fixa',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/29056',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/29056',
          descricao: 'B√¥nus elemental.'
        }
      ],
      slotsRight: [
        {
          slotLabel: 'Enchant Meio',
          id: 310329,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310329',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310329',
          descricao: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        }
      ]
    },

    // ABA CARTAS (exemplo com alguns)
    cards: {
      slotsLeft: [
        {
          slotLabel: 'Carta Topo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          slotLabel: 'Cartas Arma',
          id: 28612,
          nome: 'Carta Y',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Capa',
          id: 20838,
          nome: 'Carta Wakwak',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Acc. Direito',
          id: 28303,
          nome: 'Carta Z',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        }
        
        // etc...
      ],
      slotsRight: [
        {
          slotLabel: 'Carta Meio',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Armadura',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Escudo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Sapato',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Acc. Esquerdo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        }
      ]
    }
  },

  // p2 / p3 por enquanto podem ficar vazios:
  p2: {
    id: 'p2',

    // ABA EQUIP
    equip: {
      slotsLeft: [
        {
          slotLabel: 'Topo',
          id: 19362,
          nome: 'Elmo do Xogum',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/19362',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/19362',
          descricao: '+15% Dano f√≠sico vs Neutro/Fogo<br>+5% ASPD (Uni√£o Solar)'
        },
        {
          slotLabel: 'Baixo',
          id: 18754,
          nome: 'Presas Vam√≠ricas',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/18754',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/18754',
          descricao: '+X Dano f√≠sico.'
        },
        {
          slotLabel: 'M√£o Direita',
          id: 28612,
          nome: 'Apocal√≠pse Ilusional',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28612',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28612',
          descricao: 'B√¥nus elemental.'
        },
        {
          slotLabel: 'Capa',
          id: 20838,
          nome: 'Sobrepeliz Ilusional',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/20838',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/20838',
          descricao: 'B√¥nus elemental.'
        },
        {
          slotLabel: 'Acess√≥rio Direito',
          id: 28303,
          nome: 'N√∫cleo Vesper 02',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28303',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28303',
          descricao: 'B√¥nus elemental.'
        }
      ],
      slotsRight: [
        {
          slotLabel: 'Meio',
          id: 19392,
          nome: 'Presilha dos Amantes [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/19392',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/19392',
          descricao: ''
        },
        {
          slotLabel: 'Armadura',
          id: 15378,
          nome: 'Coura√ßa Magm√°tica [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/15378',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/15378',
          descricao: ''
        },
        {
          slotLabel: 'M√£o Esquerda',
          id: 28949,
          nome: 'Escudo de J√≥ias [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28949',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28949',
          descricao: ''
        },
        {
          slotLabel: 'Sapato',
          id: 22199,
          nome: 'Botas Magm√°ticas [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/22199',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/22199',
          descricao: ''
        },
        {
          slotLabel: 'Acess√≥rio Esquerdo',
          id: 28509,
          nome: 'Anel Ilusional [1]',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/28509',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/28509',
          descricao: ''
        }
      ]
    },

    // ABA VISUAL (exemplo com seus enchants)
    visual: {
      slotsLeft: [
        {
          slotLabel: 'Enchant Topo',
          id: 310327,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310327',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310327',
          descricao: '+15% Dano f√≠sico vs Neutro/Fogo<br>+5% ASPD (Uni√£o Solar)'
        },
        {
          slotLabel: 'Enchant Baixo',
          id: 310328,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310328',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310328',
          descricao: '+X Dano f√≠sico.'
        },
        {
          slotLabel: 'Enchant Capa',
          id: 25208,
          nome: 'Absor√ß√£o de SP',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/25208',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/25208',
          descricao: 'B√¥nus elemental.'
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          slotLabel: 'Enchant Capa (Dual)',
          id: 29056,
          nome: 'Esfera da Conj. Fixa',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/29056',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/29056',
          descricao: 'B√¥nus elemental.'
        }
      ],
      slotsRight: [
        {
          slotLabel: 'Enchant Meio',
          id: 310329,
          nome: 'Melee Stone',
          iconUrl: 'https://www.divine-pride.net/img/items/item/kROZ/310329',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/kROZ/310329',
          descricao: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          type: 'placeholder',
          slotLabel: ''
        }
      ]
    },

    // ABA CARTAS (exemplo com alguns)
    cards: {
      slotsLeft: [
        {
          slotLabel: 'Carta Topo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          type: 'placeholder',
          slotLabel: ''
        },
        {
          slotLabel: 'Cartas Arma',
          id: 28612,
          nome: 'Carta Y',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Capa',
          id: 20838,
          nome: 'Carta Wakwak',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Acc. Direito',
          id: 28303,
          nome: 'Carta Z',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        }
        
        // etc...
      ],
      slotsRight: [
        {
          slotLabel: 'Carta Meio',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Armadura',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Escudo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Sapato',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        },
        {
          slotLabel: 'Carta Acc. Esquerdo',
          id: 4484,
          nome: 'Carta X',
          iconUrl: 'https://www.divine-pride.net/img/items/item/bRO/4484',
          collectionUrl: 'https://www.divine-pride.net/img/items/collection/bRO/4484',
          descricao: '...'
        }
      ]
    }
  },
  p3: { id: 'p3', equip: { slotsLeft: [], slotsRight: [] }, visual: { slotsLeft: [], slotsRight: [] }, cards: { slotsLeft: [], slotsRight: [] } },
  p4: { id: 'p4', equip: { slotsLeft: [], slotsRight: [] }, visual: { slotsLeft: [], slotsRight: [] }, cards: { slotsLeft: [], slotsRight: [] } }
};

// Inicializa as janelas de progress√£o
if (window.renderEquipProgressions) {
  window.renderEquipProgressions(PROGRESSOES_EQUIP).then(() => {
    // liga os bot√µes Progress√£o 1/2/3
    setupProgressionTabs();

    // re-inicializa as abas (Equip / Visual / Cartas)
    if (window.initEquipTabs) {
      window.initEquipTabs();
    }

    // üîπ reaplica os hyperlinks nos itens das janelas novas
    if (window.aplicarLinksAutomaticosPreservandoListeners) {
      window.aplicarLinksAutomaticosPreservandoListeners();
    }
  });
}

    // Configura os bot√µes de aba de progress√£o

  function setupProgressionTabs() {
    const tabs = document.querySelectorAll('.progression-tab');
    const windows = document.querySelectorAll('.progression-window');

    function showProgression(id) {
      windows.forEach(w => {
        w.style.display = (w.dataset.progression === id) ? '' : 'none';
      });

      tabs.forEach(t => {
        if (t.dataset.progression === id) {
          t.classList.add('active');
        } else {
          t.classList.remove('active');
        }
      });
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        showProgression(tab.dataset.progression);
      });
    });

    // mostra p1 por padr√£o
    showProgression('p1');
  }


    </script>
    
</body>
</html>
