<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Equipamentos – Mestre Estelar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- MENU AUTOMÁTICO -->
    <div id="menu-container"></div>
    <script src="menu.js"></script>

    <!-- CONTEÚDO -->
    <div class="content">
        <h1>⚔️ Equipamentos Recomendados</h1>
        <p>Lista de equipamentos focados no ciclo Solar/Lunar, priorizando dano, ASPD e sustain.</p>

        <!-- ===== Janela principal de equipamentos ===== -->
        <div class="equip-window">

            <!-- abas -->
            <div class="equip-tabs">
                <button class="tab active" data-tab="equip">Equip.</button>
                <button class="tab" data-tab="visual">Visual</button>
            </div>

            <!-- === Abas: container para cada conteúdo === -->
            <!-- Aba Equip (visível por padrão) -->
            <div class="tab-container active" id="tab-equip">

                <div class="equip-body">

                    <!-- LEFT: col de slots -->
                    <div class="slots-col">
                        <!-- Head -->
                        <div class="slot-row">
                            <div class="slot-label">Topo</div>
                            <div class="slot-box">
                                <div class="item" data-id="19362">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/19362" alt="Elmo do Xogum">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/19362" alt="">
                                        <div class="ro-tooltip-title">Elmo do Xogum</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+15% Dano físico vs Neutro/Fogo<br>+5% ASPD (União Solar)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- R-Hand -->
                        <div class="slot-row">
                            <div class="slot-label">Baixo</div>
                            <div class="slot-box">
                                <div class="item" data-id="18754">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/18754" alt="Presas Vamíricas">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/18754" alt="">
                                        <div class="ro-tooltip-title">Presas Vamíricas</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+X Dano físico.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Robe (meio) -->
                        <div class="slot-row">
                            <div class="slot-label">Mão Direita</div>
                            <div class="slot-box">
                                <div class="item" data-id="28612">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28612" alt="Apocalípse Ilusional">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/28612" alt="">
                                        <div class="ro-tooltip-title">Apocalípse Ilusional</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>Bônus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Accessory -->
                        <div class="slot-row">
                            <div class="slot-label">Capa</div>
                            <div class="slot-box">
                                <div class="item" data-id="20838">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/20838" alt="Sobrepeliz Ilusional">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/20838" alt="">
                                        <div class="ro-tooltip-title">Sobrepeliz Ilusional</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>Bônus elemental.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- L-hand -->
                        <div class="slot-row">
                            <div class="slot-label">Acessório Direito</div>
                            <div class="slot-box">
                                <div class="item" data-id="28303">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28303" alt="Núcleo Vesper 02">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/28303" alt="">
                                        <div class="ro-tooltip-title">Núcleo Vesper 02</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>Bônus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- end slots-col -->
                    
                    <!-- CENTER: quadro do boneco -->
                    <div class="char-col">
                        <div class="char-frame">
                        <div class="char-sprite-bg" style="background-image:url('https://raw.githubusercontent.com/tatutoru/Mestre-Estelar/main/assets/Sprites/char-iddle.png');"></div>
                        </div>
                    </div>

                    <!-- RIGHT SLOTS (coluna igual à esquerda) -->
                    <div class="slots-col slots-col-right">
                        <!-- Topo -->
                        <div class="slot-row">
                            <div class="slot-label">Meio</div>
                            <div class="slot-box">
                                <div class="item" data-id="19392">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/19392" alt="Presilha dos Amantes [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/19392" alt="">
                                        <div class="ro-tooltip-title">Presilha dos Amantes [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Baixo -->
                        <div class="slot-row">
                            <div class="slot-label">Armadura</div>
                            <div class="slot-box">
                                <div class="item" data-id="15378">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/15378" alt="Couraça Magmática [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/15378" alt="">
                                        <div class="ro-tooltip-title">Couraça Magmática [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Mão Direita -->
                        <div class="slot-row">
                            <div class="slot-label">Mão Esquerda</div>
                            <div class="slot-box">
                                <div class="item" data-id="28949">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28949" alt="Escudo de Jóias [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/28949" alt="">
                                        <div class="ro-tooltip-title">Escudo de Jóias [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Capa -->
                        <div class="slot-row">
                            <div class="slot-label">Sapato</div>
                            <div class="slot-box">
                                <div class="item" data-id="22199">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/22199" alt="Botas Magmáticas [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/22199" alt="">
                                        <div class="ro-tooltip-title">Botas Magmáticas [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Acessório Direito -->
                        <div class="slot-row">
                            <div class="slot-label">Acessório Esquerdo</div>
                            <div class="slot-box">
                                <div class="item" data-id="28509">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28509" alt="Anel Ilusional [1]">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/28509" alt="">
                                        <div class="ro-tooltip-title">Anel Ilusional [1]</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div> <!-- fim equip-body -->

            </div> <!-- fim tab-equip -->

            <!-- Aba Visual (cópia inicial do conteúdo do Equip) -->
            <div class="tab-container" id="tab-visual" style="display:none;">

                <div class="equip-body">

                    <!-- LEFT: col de slots -->
                    <div class="slots-col">
                        <!-- Head -->
                        <div class="slot-row">
                            <div class="slot-label">Enchant Topo</div>
                            <div class="slot-box">
                                <div class="item" data-id="310327">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/310327" alt="Melee Stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/310327" alt="">
                                        <div class="ro-tooltip-title">Melee Stone</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+15% Dano físico vs Neutro/Fogo<br>+5% ASPD (União Solar)</p>
                                    </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- R-Hand -->
                        <div class="slot-row">
                            <div class="slot-label">Enchant Baixo</div>
                            <div class="slot-box">
                                <div class="item" data-id="310328">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/310328" alt="Melee Stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/310328" alt="">
                                        <div class="ro-tooltip-title">Melee Stoneo</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>+X Dano físico.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Robe (meio) -->
                        <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div>

                        <!-- Accessory -->
                        <div class="slot-row">
                            <div class="slot-label">Enchant Capa</div>
                            <div class="slot-box">
                                <div class="item" data-id="25208">
                                <div class="ro-tooltip">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/25208" alt="Absorção de SP">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/25208" alt="">
                                        <div class="ro-tooltip-title">Absorção de SP</div>
                                        <div class="ro-tooltip-line"></div>
                                        <p>Bônus elemental.</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- L-hand -->
                        <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div>
                    </div> <!-- end slots-col -->
                    
                    <!-- CENTER: quadro do boneco -->
                    <div class="char-col">
                        <div class="char-frame">
                        <div class="char-sprite-bg" style="background-image:url('https://raw.githubusercontent.com/tatutoru/Mestre-Estelar/main/assets/Sprites/char-iddle.png');"></div>
                        </div>
                    </div>

                    <!-- RIGHT SLOTS (coluna igual à esquerda) -->
                    <div class="slots-col slots-col-right">
                        <!-- Topo -->
                        <div class="slot-row">
                            <div class="slot-label">Enchant Meio</div>
                            <div class="slot-box">
                                <div class="item" data-id="310329">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/310329" alt="Melee Stone">
                                    <div class="ro-tooltip-box">
                                        <img src="https://www.divine-pride.net/img/items/collection/kROZ/310329" alt="">
                                        <div class="ro-tooltip-title">Melee Stone</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Baixo -->
                        <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div>

                        <!-- Mão Direita -->
                        <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div>

                        <!-- Capa -->
                        <div class="slot-row">
                            <div class="slot-label">-</div>
                            <div class="slot-box">
                            </div>
                        </div>

                        <!-- Acessório Direito -->
                        <div class="slot-row">
                            <div class="slot-label">Anel do Mercador</div>
                            <div class="slot-box">
                                <div class="item" data-id="490404">
                                <div class="ro-tooltip" tabindex="0">
                                    <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/iRO/490404" alt="Anel do Mercador">
                                    <div class="ro-tooltip-box" role="tooltip">
                                        <img src="https://www.divine-pride.net/img/items/collection/iRO/490404" alt="">
                                        <div class="ro-tooltip-title">Anel do Mercador</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div> <!-- fim equip-body -->

            </div> <!-- fim tab-visual -->

        </div> <!-- fim equip-window -->

    </div> <!-- fim content -->

    <!-- scripts: abas simples, suporte touch para tooltips e reposicionamento -->
    <script>
      // Abas visuais (apenas estilização local) — agora alterna conteúdo também
      document.querySelectorAll('.equip-tabs .tab').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.equip-tabs .tab').forEach(t=>t.classList.remove('active'));
          btn.classList.add('active');

          const tipo = (btn.dataset.tab || '').trim().toLowerCase();
          if(tipo === 'visual' || tipo === 'visuais' || tipo === 'visuals'){
            // mostra a aba visual e oculta equip
            const v = document.getElementById('tab-visual');
            const e = document.getElementById('tab-equip');
            if(e) e.style.display = 'none';
            if(v) v.style.display = '';
          } else {
            // mostra equip e oculta visual
            const v = document.getElementById('tab-visual');
            const e = document.getElementById('tab-equip');
            if(e) e.style.display = '';
            if(v) v.style.display = 'none';
          }
        });
      });

      // suporte touch: alterna .touch-open em tooltips quando tocar
      document.querySelectorAll('.ro-tooltip').forEach(el=>{
        el.addEventListener('touchstart', function(e){
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>{ if(o!==el) o.classList.remove('touch-open'); });
          el.classList.toggle('touch-open');
        });
      });

      // fecha tooltip touch ao tocar fora
      document.addEventListener('touchstart', function(e){
        if(!e.target.closest('.ro-tooltip')) {
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>o.classList.remove('touch-open'));
        }
      });

      // Reposiciona tooltips para a esquerda se ultrapassarem a viewport
      (function(){
        const margin = 12; // margem mínima da viewport

        function updateTooltipPlacement(el) {
          const box = el.querySelector('.ro-tooltip-box');
          if(!box) return;
          el.classList.remove('flip-left');

          // tornar visível temporariamente para medir largura se necessário
          const prevVis = box.style.visibility;
          box.style.visibility = 'hidden';
          box.style.display = 'block';
          const boxWidth = box.offsetWidth || 220;
          box.style.display = '';
          box.style.visibility = prevVis || '';

          const rect = el.getBoundingClientRect();
          const predictedRight = rect.left + rect.width/2 + boxWidth/2;

          if (predictedRight > (window.innerWidth - margin)) {
            el.classList.add('flip-left');
          } else {
            el.classList.remove('flip-left');
          }
        }

        document.querySelectorAll('.ro-tooltip').forEach(el=>{
          el.addEventListener('mouseenter', ()=> updateTooltipPlacement(el));
          el.addEventListener('focus', ()=> updateTooltipPlacement(el)); // acessibilidade
          el.addEventListener('touchstart', ()=> updateTooltipPlacement(el));
        });

        window.addEventListener('resize', () => {
          document.querySelectorAll('.ro-tooltip').forEach(el=> updateTooltipPlacement(el));
        });
      })();
    
function aplicarLinksAutomaticosPreservandoListeners() {
  const baseURL = "https://www.pathofisgard.com.br/database/item/";

  document.querySelectorAll(".item[data-id]").forEach(container => {
    const id = container.getAttribute("data-id");
    const url = baseURL + id;

    // encontra o elemento tooltip existente (preserva listeners)
    const tooltipEl = container.querySelector(".ro-tooltip");
    if (!tooltipEl) return; // nada a fazer

    // cria o <a> e move o nó tooltip para dentro dele
    const a = document.createElement("a");
    a.href = url;
    a.target = "_blank";
    a.className = "item-link";
    // move o nó (não clona) - preserva event listeners
    a.appendChild(tooltipEl);

    // remove qualquer coisa restante e insere o <a>
    container.textContent = "";   // limpa, sem recriar tooltip
    container.appendChild(a);
  });
}

aplicarLinksAutomaticosPreservandoListeners();

    </script>
    
</body>
</html>
