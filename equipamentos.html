<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Equipamentos – Mestre Estelar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- MENU AUTOMÁTICO -->
    <div id="menu-container"></div>
    <script src="menu.js"></script>

    <!-- CONTEÚDO -->
    <div class="content">
        <h1>⚔️ Equipamentos Recomendados</h1>
        <p>Lista de equipamentos focados no ciclo Solar/Lunar, priorizando dano, ASPD e sustain.</p>

        <!-- ===== Janela principal de equipamentos ===== -->
        <div class="equip-window">

            <!-- abas -->
            <div class="equip-tabs">
                <button class="tab active">Equip.</button>
                <button class="tab">Visual</button>
            </div>

            <div class="equip-body">

                <!-- LEFT: col de slots -->
                <div class="slots-col">
                    <!-- Head -->
                    <div class="slot-row">
                        <div class="slot-label">Topo</div>
                        <div class="slot-box">
                            <div class="ro-tooltip">
                                <!-- troque a URL abaixo pela do Divine-Pride que quiser -->
                                <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/19362" alt="Elmo do Xogum">
                                <div class="ro-tooltip-box">
                                    <img src="https://www.divine-pride.net/img/items/collection/kROZ/19362" alt="">
                                    <div class="ro-tooltip-title">Elmo do Xogum</div>
                                    <div class="ro-tooltip-line"></div>
                                    <p>+15% Dano físico vs Neutro/Fogo<br>+5% ASPD (União Solar)</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- R-Hand -->
                    <div class="slot-row">
                        <div class="slot-label">Baixo</div>
                        <div class="slot-box">
                            <div class="ro-tooltip">
                                <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/18754" alt="Presas Vamíricas">
                                <div class="ro-tooltip-box">
                                    <img src="https://www.divine-pride.net/img/items/collection/kROZ/18754" alt="">
                                    <div class="ro-tooltip-title">Presas Vamíricas</div>
                                    <div class="ro-tooltip-line"></div>
                                    <p>+X Dano físico.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Robe (meio) -->
                    <div class="slot-row">
                        <div class="slot-label">Mão Direita</div>
                        <div class="slot-box">
                            <div class="ro-tooltip">
                                <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28612" alt="Apocalípse Ilusional">
                                <div class="ro-tooltip-box">
                                    <img src="https://www.divine-pride.net/img/items/collection/kROZ/28612" alt="">
                                    <div class="ro-tooltip-title">Apocalípse Ilusional</div>
                                    <div class="ro-tooltip-line"></div>
                                    <p>Bônus elemental.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Accessory -->
                    <div class="slot-row">
                        <div class="slot-label">Capa</div>
                        <div class="slot-box">
                            <div class="ro-tooltip">
                                <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/20838" alt="Sobrepeliz Ilusional">
                                <div class="ro-tooltip-box">
                                    <img src="https://www.divine-pride.net/img/items/collection/kROZ/20838" alt="">
                                    <div class="ro-tooltip-title">Sobrepeliz Ilusional</div>
                                    <div class="ro-tooltip-line"></div>
                                    <p>Bônus elemental.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- L-hand -->
                    <div class="slot-row">
                        <div class="slot-label">Acessório Direito</div>
                        <div class="slot-box">
                            <div class="ro-tooltip">
                                <img class="slot-icon" src="https://www.divine-pride.net/img/items/item/kROZ/28303" alt="Núcleo Vesper 02">
                                <div class="ro-tooltip-box">
                                    <img src="https://www.divine-pride.net/img/items/collection/kROZ/28303" alt="">
                                    <div class="ro-tooltip-title">Núcleo Vesper 02</div>
                                    <div class="ro-tooltip-line"></div>
                                    <p>Bônus elemental.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- end slots-col -->

                <!-- CENTER: quadro do boneco -->
                <div class="char-col">
                    <div class="char-frame">
                        <!-- substitua por assets/sprites/char_idle.png ou URL remota -->
                        <div class="char-frame char-sprite"></div>
                    </div>
                </div>
                
            </div> <!-- fim equip-body -->

        </div> <!-- fim equip-window -->

    </div> <!-- fim content -->

    <!-- scripts: abas simples, suporte touch para tooltips e reposicionamento -->
    <script>
      // Abas visuais (apenas estilização local)
      document.querySelectorAll('.equip-tabs .tab').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.equip-tabs .tab').forEach(t=>t.classList.remove('active'));
          btn.classList.add('active');
          // Se quiser alternar conteúdo, implemente aqui
        });
      });

      // suporte touch: alterna .touch-open em tooltips quando tocar
      document.querySelectorAll('.ro-tooltip').forEach(el=>{
        el.addEventListener('touchstart', function(e){
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>{ if(o!==el) o.classList.remove('touch-open'); });
          el.classList.toggle('touch-open');
        });
      });

      // fecha tooltip touch ao tocar fora
      document.addEventListener('touchstart', function(e){
        if(!e.target.closest('.ro-tooltip')) {
          document.querySelectorAll('.ro-tooltip.touch-open').forEach(o=>o.classList.remove('touch-open'));
        }
      });

      // Reposiciona tooltips para a esquerda se ultrapassarem a viewport
      (function(){
        const margin = 12; // margem mínima da viewport

        function updateTooltipPlacement(el) {
          const box = el.querySelector('.ro-tooltip-box');
          if(!box) return;
          el.classList.remove('flip-left');

          // tornar visível temporariamente para medir largura se necessário
          const prevVis = box.style.visibility;
          box.style.visibility = 'hidden';
          box.style.display = 'block';
          const boxWidth = box.offsetWidth || 220;
          box.style.display = '';
          box.style.visibility = prevVis || '';

          const rect = el.getBoundingClientRect();
          const predictedRight = rect.left + rect.width/2 + boxWidth/2;

          if (predictedRight > (window.innerWidth - margin)) {
            el.classList.add('flip-left');
          } else {
            el.classList.remove('flip-left');
          }
        }

        document.querySelectorAll('.ro-tooltip').forEach(el=>{
          el.addEventListener('mouseenter', ()=> updateTooltipPlacement(el));
          el.addEventListener('focus', ()=> updateTooltipPlacement(el)); // acessibilidade
          el.addEventListener('touchstart', ()=> updateTooltipPlacement(el));
        });

        window.addEventListener('resize', () => {
          document.querySelectorAll('.ro-tooltip').forEach(el=> updateTooltipPlacement(el));
        });
      })();
    </script>

</body>
</html>
